<?xml version="1.0"?>
<root main_tree_to_execute="MainTree">
    <!-- ////////// -->
    <BehaviorTree ID="MainTree">
        <SequenceStar>
            <Control ID="RecoveryNode" name="PatrolAndFindHuman">
                <Action ID="LookForHuman" name="LookForHumanAction" output="{image}"/>
                <Control ID="RecoveryNode" name="NavigateRecovery">
                    <Control ID="PipelineSequence" name="NavigateWithReplanning">
                        <Control ID="RateController">
                            <Control ID="RecoveryNode" name="ComputePathToPose">
                                <Action ID="ComputePathToPose"/>
                                <Action ID="ClearEntireCostmap"/>
                            </Control>
                        </Control>
                        <Control ID="RecoveryNode" name="FollowPath">
                            <Action ID="FollowPath"/>
                            <Action ID="ClearEntireCostmap"/>
                        </Control>
                    </Control>
                    <SequenceStar name="RecoveryActions">
                        <Action ID="RecoveryLogger"/>
                        <Action ID="ClearEntireCostmap"/>
                        <Action ID="ClearEntireCostmap"/>
                        <Action ID="Spin"/>
                        <Action ID="Wait"/>
                    </SequenceStar>
                </Control>
            </Control>
            <Condition ID="HumanIsFound" name="HumanIsFoundCondition" target="{image}" output="target_pos"/>
            <Control ID="RecoveryNode" name="FollowPersonActions">
                <Action ID="FollowPerson"/>
                <Action ID="RefindPerson"/>
            </Control>
        </SequenceStar>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel>
        <Action ID="ClearEntireCostmap"/>
        <Action ID="ComputePathToPose"/>
        <Action ID="FollowPath"/>
        <Action ID="FollowPerson"/>
        <Condition ID="HumanIsFound"/>
        <Action ID="LookForHuman"/>
        <Control ID="PatrolAndFindHuman"/>
        <Control ID="PipelineSequence"/>
        <Control ID="RateController"/>
        <Action ID="RecoveryLogger"/>
        <Control ID="RecoveryNode"/>
        <Action ID="RefindPerson"/>
        <Action ID="Spin"/>
        <Action ID="Wait"/>
    </TreeNodesModel>
    <!-- ////////// -->
</root>

